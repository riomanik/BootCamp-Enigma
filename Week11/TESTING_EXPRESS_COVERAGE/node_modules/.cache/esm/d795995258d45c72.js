let express,ProductRouter,CategoryRouter,UserRouter,UserInfoRouter,logErrorEvent,logInfoEvent,fs;_58d‍.x([["default",()=>_58d‍.o]]);_58d‍.w("express",[["default",["express"],function(v){express=v}]]);_58d‍.w("./ProductRouter",[["default",["ProductRouter"],function(v){ProductRouter=v}]]);_58d‍.w("./CategoryRouter",[["default",["CategoryRouter"],function(v){CategoryRouter=v}]]);_58d‍.w("./UserRouter",[["default",["UserRouter"],function(v){UserRouter=v}]]);_58d‍.w("./UserInfoRouter",[["default",["UserInfoRouter"],function(v){UserInfoRouter=v}]]);_58d‍.w("../events/logging.event",[["logErrorEvent",["logErrorEvent"],function(v){logErrorEvent=v}],["logInfoEvent",["logInfoEvent"],function(v){logInfoEvent=v}]]);_58d‍.w("fs",[["fs",["fs"],function(v){fs=v}]]);







_58d‍.d(express
  .Router()
  // .use("/auth", AuthRouter)
  // .use(function(req, res, next) {
  //   if (req.session.name) {
  //     next();
  //   } else {
  //     logErrorEvent.emit("SESSION", res);
  //   }
  // })
  // .user(function (req, res, next) {
  // solve 1
  // log.info({ transType: "USERACCESS" }, req);

  // solve 2
  // logInfoEvent.emit("ACCESS", req.originalUrl);
  // next();
  // })
  .use("/product", ProductRouter)
  .use("/category", CategoryRouter)
  .use("/user", UserRouter)
  .use("/user-info", UserInfoRouter)
  .use("/stream", (req, res) => {
    const file =
      "E:\\ENIGMACAMP_RIO\\Chou Ikimonobakari ~Ten-nen Kinen Members BEST Selection~ [Best Of] (2016.03.15)\\01 SAKURA.m4a";
    fs.exists(file, exists => {
      if (exists) {
        fs.createReadStream(file).pipe(res);
      } else {
        res.send("Error -404");
      }
    });
  })

  // .user(function(req, res, next) {
  //   res.body = res.body + "modified";
  //   next();
  // })
  .use((req, res, next) => {
    // solve 1
    // log.error({ transType: "USERACCESS-FAILED" }, req);
    // res.status(404).json({ message: "Not Found." });

    // solve 2
    logErrorEvent.emit("ROUTE", req, res);
  }));
